webpackJsonp([3],{cFza:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Gu7T"),a=o.n(r),l=o("Xxa5"),i=o.n(l),n=o("exGp"),d=o.n(n),s=o("K8K1"),c=o("bQLH"),w={name:"keywordDialog",props:{propGetKeywordUrl:"",getDailyReportUrl:"",getMonthlyReportUrl:"",getWeeklyReportUrl:"",propKeywordSelectShow:{default:!1},propMaxSelect:{default:20}},data:function(){return{keywordSelectShow:!1,keywordListSelectedTemp:[],keywordSearchWord:"",keywordListTableCurrentPage:1,keywordListTableTotalPage:1,keywordListTotalRecord:0,keywordListTablePageSize:s.a.system.query.pageSize+0,keywordListTableLoading:!1,keywordListTableInit:!0}},methods:{dialogKeywordShowHandle:function(){console.log("test");this.keywordListTableInit&&this.dialogKeywordGetHandle(this.keywordListTablePageFilter,this.inputSearchWordFilter)},dialogKeywordGetHandle:function(){var e=d()(i.a.mark(function e(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("dialogKeywordGetHandle"),(t=this).dialogKeywordSelectShow=!0,t.keywordListTableLoading=!0,e.next=6,c.default.statamazonkeyword(t.propGetKeywordUrl,o,r).then(function(e){t.$store.dispatch("updateKeywordListData",e.data),e.tp<1&&t.$store.dispatch("updateKeywordListData",[]),t.keywordListTotalRecord=e.tr?e.tr:0,t.keywordListTableTotalPage=e.tp,t.keywordListTableLoading=!1}).catch(function(e){t.$message.error(e.message||t.$i18n.t("操作失败")),t.keywordListTableLoading=!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),dialogTableCheckSelect:function(e,t,o){console.log(e);this.dialogKeywordListTableRowSelectedHandle(this.$refs.multipleTable.selection,e)},dialogKeywordListTableSelectionChange:function(e){var t=this;console.log("补勾选keyword"),t.totalSelectKeywordItems.forEach(function(e){for(var o in t.keywordListTable){var r=t.keywordListTable[o];console.log(r),e.id==r.id&&(t.$refs.multipleTable.toggleRowSelection(e,!0),t.$refs.multipleTable.toggleRowSelection(r,!0))}})},dialogKeywordListTableRowSelectedHandle:function(e,t){var o=this,r=o.keywordListSelectedTemp.filter(function(e){return t.id==e.id});if(r.length<1){if(console.log("没有重复就加入",r.length<1,r),!(o.keywordListSelectedTemp.length<o.propMaxSelect))return o.$message.warning("可选择的SKU不可超过"+o.propMaxSelect+"个"),o.$refs.multipleTable.toggleRowSelection(t,!1),!1;o.keywordListSelectedTemp.push(t),o.$refs.multipleTable.toggleRowSelection(t,!0)}else o.keywordListSelectedTemp.splice(o.keywordListSelectedTemp.indexOf(t),1),o.$refs.multipleTable.toggleRowSelection(t,!1),console.log("重复了就去掉",r.length>0,r)},dialogKeywordSelectCancelHandle:function(){this.$store.dispatch("updateKeywordSelectedListData",[]),this.dialogKeywordSelectShow=!1},dialogKeywordSelectSubmitHandle:function(){var e=this;if(e.totalSelectKeywordItems.length>20)return e.$message.warning("选择的SKU超过20个"),!1;e.keywordSearchWord="",e.keywordListTableCurrentPage=1,e.$store.dispatch("updateKeywordSelectedListData",[].concat(a()(e.totalSelectKeywordItems))),e.keywordListSelectedTemp=[],e.keywordSelectShow=!1,e.$parent.totalSelectKeywordItems=e.totalSelectKeywordItems},keywordSearchHandle:function(){var e=d()(i.a.mark(function e(t){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=this).keywordListTableCurrentPage=1,o.dialogKeywordGetHandle(o.keywordListTablePageFilter,o.inputSearchWordFilter);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),dialogKeywordFilterFunc:function(e,t,o){console.log(e,"123")},keywordListTablePageChangeHandle:function(e){console.log(e);this.keywordListTableCurrentPage=e,this.dialogKeywordGetHandle(this.keywordListTablePageFilter,this.inputSearchWordFilter)}},computed:{keywordListSelected:function(e){return e.$store.getters.getFilterKeywordSelectData},keywordListData:function(e){return e.$store.getters.getFilterKeywordData},chartType:function(){return this.$store.dispatch("updatePageSeries",this.$route.meta.series),this.$route.meta.series},inputSearchWordFilter:function(){var e=[];return this.keywordListTableCurrentPage=1,this.keywordSearchWord&&e.push([{"title-ilk":this.keywordSearchWord}]),e},keywordListTablePageFilter:function(){return{page:this.keywordListTableCurrentPage,size:this.keywordListTablePageSize||s.a.system.query.pageSize}},keywordListTableFiltered:function(){var e=this;return e.keywordSearch?e.keywordListTable.filter(function(t){return t.keyword.match(new RegExp(e.keywordSearch,"i"))}):e.keywordListTable},totalSelectKeywordItems:function(){var e=this,t=void 0;return t=e.keywordListSelectedTemp.filter(function(t){var o=void 0;for(var r in e.keywordListSelected){if(1==(o=e.keywordListSelected[r].id==t.id))break;o=!1}return!o}),console.log("去重选择列表",t),t.concat(e.keywordListSelected)},beforeClose:function(){this.$emit("closeMe",this.keywordSelectShow)}},watch:{propKeywordSelectShow:function(e){this.keywordSelectShow=e}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"Keyword 选择",visible:e.keywordSelectShow,modal:!0,top:"5vh","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.beforeClose},on:{"update:visible":function(t){e.keywordSelectShow=t},opened:e.dialogKeywordShowHandle}},[o("el-row",{staticStyle:{height:"70vh","z-index":"2048"},attrs:{gutter:24}},[o("el-col",{attrs:{span:14}},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入Keyword进行搜索",size:"mini"},model:{value:e.keywordSearchWord,callback:function(t){e.keywordSearchWord=t},expression:"keywordSearchWord"}},[o("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-third  el-icon-search"},on:{click:e.keywordSearchHandle},slot:"append"})],1)],1),e._v(" "),o("el-col",{attrs:{span:14}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.keywordListTableLoading,expression:"keywordListTableLoading"}],ref:"multipleTable",staticClass:"compact",staticStyle:{width:"100%","margin-top":".5em","min-height":"400px","max-height":"500px"},attrs:{data:e.keywordListData,"max-height":"500","select-on-indeterminate":!1,"header-row-style":{height:"32px"}},on:{select:e.dialogKeywordListTableRowSelectedHandle,"row-click":e.dialogTableCheckSelect}},[o("el-table-column",{staticClass:"table-column",attrs:{type:"selection",width:"55"},on:{"filter-method":e.dialogKeywordFilterFunc}}),e._v(" "),o("el-table-column",{staticClass:"table-column",attrs:{prop:"id",label:"Id"}}),e._v(" "),o("el-table-column",{staticClass:"table-column",attrs:{prop:"title",label:"Title"}})],1),e._v(" "),o("el-row",{staticStyle:{margin:"5px 0 0 0"}},[o("el-col",{attrs:{align:"center"}},[o("el-pagination",{attrs:{small:"",background:"",layout:"total, prev, pager, next, jumper","page-count":e.keywordListTableTotalPage,"current-page":e.keywordListTableCurrentPage},on:{"update:currentPage":function(t){e.keywordListTableCurrentPage=t},"update:current-page":function(t){e.keywordListTableCurrentPage=t},"current-change":e.keywordListTablePageChangeHandle}})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:10}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.keywordListTableLoading,expression:"keywordListTableLoading"}],staticClass:"compact",staticStyle:{width:"100%","margin-top":".5em","min-height":"400px","max-height":"500px"},attrs:{data:e.keywordListSelectedTemp,"max-height":"600"}},[o("el-table-column",{attrs:{prop:"title",label:"Selected Keyword"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer",align:"center"},slot:"footer"},[o("el-button",{attrs:{size:"mini"},on:{click:e.dialogKeywordSelectCancelHandle}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.dialogKeywordSelectSubmitHandle}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var y=o("VU/8")(w,u,!1,function(e){o("dwZz")},"data-v-ebda8ee0",null);t.default=y.exports},dwZz:function(e,t){}});
//# sourceMappingURL=3.js.map